# First Release Note 01-Feb-2020

## Scope

Release note for the "Compact PCB Maker - The Ant" machine firmware.  
This release note aims to summarize and document the evolution of the firmware images (the released binaries), although not all the details will be reported.  

The firmware is a porting of GRBL 0.9 on the NUCLEO-F401RE, an STM32 based microcontroller board. The low layer hardware access libraries used are the libopencm3.
For more detailed information read the [wiki](https://bitbucket.org/compactpcbmaker/cpcbm/wiki/Index.wiki). 

## Status  

At the time of the first issue of this release note, there are 3 firmware binaries released in the [Download section](https://bitbucket.org/compactpcbmaker/cpcbm/downloads/):

- main_f401_38.bin, that is the stable version used for the The Ant machine. This fw doesn't work properly to drive a laser head, since the PWM output is in high-impedance when the PWM Output is disabled(M5 command). This is not safe when driving a laser. 
- main_f401_39_BETA_more_safe_for_laser.bin, that is like the fw 38, but the PWM output is set to zero Volt, when the PWM Output is disabled(M5 command). This behaviour is safer when driving a laser head.
- gocm3_nucleo-f401re_CPCBM_AFRO20_COREXY_VER_0.9.57.bin, that has the same behaviour of the fw 39, but other experimental modifications:
	- different linking, i.e. the code and settings are stored in the STM32F401RE embedded FLASH in a different way respect to the other two binaries, there is a part of the code in the first sectors, then the settings, and then the rest of the code.  
	The advantage of this modification is that the settings are stored in smaller sectors, and changing and resetting them is faster. The drawbacks are that the binary is larger, also if the effective size used is about the same, and above all that every time that a new firmware binary is loaded the settings are reset to the default values.
	- the green led of the NUCLEO is used as an heart-beat to see if the firmware is up and running.
	- the building system is now based on python scripts and parametric, and the firmware version is set as MAJOR.minor.build. The MAJOR and minor numbers are set as 0.9, to reflect that this firmware is a porting of the version 0.9 of GRBL. The build number is automatically generated by the bitbucket pipelines and it is equal to the number of the commit.